(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();function I(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function p(e,n=!1){const s=I(),r=`_${s}`;return Object.defineProperty(window,r,{value:t=>(n&&Reflect.deleteProperty(window,r),e?.(t)),writable:!1,configurable:!0}),s}async function h(e,n={}){return new Promise((s,r)=>{const t=p(c=>{s(c),Reflect.deleteProperty(window,`_${o}`)},!0),o=p(c=>{r(c),Reflect.deleteProperty(window,`_${t}`)},!0);window.__TAURI_IPC__({cmd:e,callback:t,error:o,...n})})}const k={"Muito Fraca":"#ff0000",Fraca:"#ff8c00",Moderada:"#ffff00",Forte:"#32cd32","Muito Forte":"#00ff00"};let a,m,l,d,u,w,f,E,y,g;function i(){const e={length:parseInt(a.value),numbers:l.checked,symbols:d.checked,no_ambiguous:u.checked};h("save_settings",{settings:e}).catch(n=>console.error("Falha ao salvar configurações:",n))}async function L(){try{const e=await h("load_settings");a.value=e.length.toString(),m.textContent=e.length.toString(),l.checked=e.numbers,d.checked=e.symbols,u.checked=e.no_ambiguous}catch{console.warn("Nenhuma configuração salva encontrada, usando padrões.")}}function v(e){const n=k[e]||"#444",s=E.querySelectorAll(".bar");let r=0;e==="Muito Forte"?r=4:e==="Forte"?r=3:e==="Moderada"?r=2:e==="Fraca"?r=1:r=0,s.forEach((t,o)=>{o<r?(t.style.backgroundColor=n,t.style.width="100%"):t.style.width="0%"}),y.textContent=`Força: ${e}`,y.style.color=n}async function b(){const e={length:parseInt(a.value),numbers:l.checked,symbols:d.checked,no_ambiguous:u.checked};try{const n=await h("generate_password",{options:e});f.value=n.password,v(n.strength),i()}catch(n){console.error("Erro ao gerar senha:",n),f.value="Erro na geração",v("Muito Fraca")}}function _(){f.value&&(navigator.clipboard.writeText(f.value),g.innerHTML='<i class="fa-solid fa-check"></i>',setTimeout(()=>{g.innerHTML='<i class="fa-regular fa-copy"></i>'},1500))}window.addEventListener("DOMContentLoaded",()=>{a=document.getElementById("length-slider"),m=document.getElementById("length-value"),w=document.getElementById("generate-button"),f=document.getElementById("password-display"),E=document.getElementById("strength-indicator"),y=document.getElementById("strength-text"),g=document.getElementById("copy-button"),l=document.getElementById("numbers-check"),d=document.getElementById("symbols-check"),u=document.getElementById("ambiguous-check"),L().then(()=>{b()}),a.addEventListener("input",()=>{m.textContent=a.value,i()}),l.addEventListener("change",i),d.addEventListener("change",i),u.addEventListener("change",i),w.addEventListener("click",b),g.addEventListener("click",_)});
